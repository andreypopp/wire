'use strict'

define (require) ->

  Event = require('wire.Event')
  View = require('wire.View')
  {extend} = require('wire')

  module 'wire.View'

  test 'propagates events from attributes', ->
    expect(1)

    o = {}
    extend(o, Event)

    class MyView extends View
      -> super ...

      events:
        'ping this.o': 'trigger pong'

    window.view = view = new MyView(o: o)
    view.on('pong', -> ok(true))
    view.o.trigger('ping')

  test 'propagates events from DOM', ->
    expect(3)

    class MyView extends View
      -> super ...

      events:
        'click': 'trigger pong'
        'click #testElement': 'trigger pong'

    view = new MyView(el: $('body'))
    view.on('pong', -> ok(true))
    view.el.trigger('click')
    view.$('#testElement').trigger('click')
